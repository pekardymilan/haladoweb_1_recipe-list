<form [formGroup]="recipeForm" class="recipe-form" (ngSubmit)="onSubmit()">
  <div class="form-row">
    <mat-form-field appearance="outline" class="flex-item">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Pancake" formControlName="name" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="flex-item">
      <mat-label>Description</mat-label>
      <textarea
        matInput
        placeholder="Soft and sweet pancake"
        formControlName="description"
      ></textarea>
    </mat-form-field>
  </div>

  <mat-divider>Ingredients</mat-divider>

  @for (ingredient of ingredientFormGroups; track ingredient.get('id')!.value) { @let ingredientId =
  ingredient.get('id')!.value;
  <div class="form-row" [formGroup]="ingredient">
    <mat-form-field appearance="outline" class="flex-item">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Flour" formControlName="name" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="flex-item">
      <mat-label>Quantity</mat-label>
      <input matInput placeholder="100" formControlName="quantity" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="flex-item">
      <mat-label>Unit of measurement</mat-label>
      <mat-select formControlName="unitOfMeasurement">
        @for (unitOfMeasurement of unitOfMeasurements; track $index) {
        <mat-option [value]="unitOfMeasurement">
          {{ unitOfMeasurement }}
        </mat-option>
        }
      </mat-select>
    </mat-form-field>

    <button type="button" mat-icon-button color="warn" (click)="removeIngredient(ingredientId)">
      <mat-icon>delete</mat-icon>
    </button>
  </div>
  }
  <button type="button" mat-fab extended (click)="addIngredient()">
    <mat-icon>add</mat-icon>
    Add new
  </button>
  <div class="form-actions">
    <button type="button" mat-stroked-button (click)="onCancel()">Cancel</button>
    <button type="submit" mat-raised-button>Submit</button>
  </div>
</form>
